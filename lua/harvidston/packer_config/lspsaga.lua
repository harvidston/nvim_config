local saga = require("lspsaga")

-- –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ lspsaga
saga.setup({
  -- –ò–∫–æ–Ω–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è code action (–∫–æ–¥–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π)
  code_action_icon = "üí°",

  -- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–Ω–µ–ª–∏ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ winbar)
  symbol_in_winbar = {
    enable = true,       -- –í–∫–ª—é—á–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
    separator = 'Ôëä ',   -- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
    show_file = true,    -- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–º—è —Ñ–∞–π–ª–∞ –≤ winbar
    file_formatter = "", -- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ (–æ—Å—Ç–∞–≤–∏–º –ø—É—Å—Ç—ã–º)
    in_custom = false,   -- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  },

  ui = {
    -- –û–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ–∫–æ–Ω –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ –ø—Ä–æ—á–µ–≥–æ
    border = "rounded",
    winblend = 1,  -- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ–∫–æ–Ω (0 ‚Äî –±–µ–∑ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏)
  },

  -- Code action (–∫–æ–¥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è) –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
  code_action = {
    num_shortcut = true,         -- –í–∫–ª—é—á–∏—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∫–ª–∞–≤–∏—à–∏ —Å —Ü–∏—Ñ—Ä–∞–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—è
    show_server_name = false,    -- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ LSP-—Å–µ—Ä–≤–µ—Ä–∞ –≤ –ø–æ–¥—Å–∫–∞–∑–∫–µ
    extend_gitsigns = true,      -- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å gitsigns –¥–ª—è code actions
  },

  -- –ü–æ–∏—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, —Å—Å—ã–ª–æ–∫, –≤—ã–∑–æ–≤–æ–≤ –∏ –¥—Ä.
  finder = {
    keys = {
      edit = "e",       -- –û—Ç–∫—Ä—ã—Ç—å –≤ —Ç–µ–∫—É—â–µ–º –æ–∫–Ω–µ
      vsplit = "v",     -- –û—Ç–∫—Ä—ã—Ç—å –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º —Å–ø–ª–∏—Ç–µ
      split = "s",      -- –û—Ç–∫—Ä—ã—Ç—å –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º —Å–ø–ª–∏—Ç–µ
      quit = "q",       -- –í—ã–π—Ç–∏ –∏–∑ –æ–∫–Ω–∞ –ø–æ–∏—Å–∫–∞
    },
  },
})

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–¥–æ–±–Ω—ã—Ö –∫–ª–∞–≤–∏—à –¥–ª—è lspsaga (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø–æ–¥ —Å–µ–±—è)
local keymap = vim.keymap.set

-- –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Å–∏–º–≤–æ–ª—É (hover)
keymap("n", "K", "<cmd>Lspsaga hover_doc<CR>")

-- –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
keymap("n", "<leader>e", "<cmd>Lspsaga show_line_diagnostics<CR>")

-- –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, —Å—Å—ã–ª–æ–∫ –∏ –≤—ã–∑–æ–≤–æ–≤
keymap("n", "gd", "<cmd>Lspsaga finder<CR>")

-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (code action)
keymap("n", "<leader>ca", "<cmd>Lspsaga code_action<CR>")

-- –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (implementation)
keymap("n", "gi", "<cmd>Lspsaga goto_implementation<CR>")

-- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ
keymap("n", "[e", "<cmd>Lspsaga diagnostic_jump_prev<CR>")

-- –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ
keymap("n", "]e", "<cmd>Lspsaga diagnostic_jump_next<CR>")

-- –ü–æ–∫–∞–∑–∞—Ç—å outline (—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–∞)
keymap("n", "<leader>o", "<cmd>Lspsaga outline<CR>")

